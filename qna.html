<!DOCTYPE html>
<html>
<head>
	<meta name="code" charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=0,maximum-scale=10,user-scalable=yes"/>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script type="text/javascript" src="STATIC/js/swiper-bundle.min.js"></script>
	<link rel="stylesheet" type="text/css" href="STATIC/css/swiper-bundle.min.css"/>
	<link rel="stylesheet" type="text/css" href="STATIC/css/style.css"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
	
	<style type="text/css">
		/*.aside_section .inner {
			width: 1440px;
			margin: 0 auto;
			display: block;
		}
		.aside_section .inner > .content{
			width: 100%;
		}
*/
	.side_menu .menu .active a {
		background-color: #EB5D3E;
	}
	.submitBtn{
		background-color: #EB5D3E;
	}
	.pagenate .active a {
		background-color: #EB5D3E;
	}
	.favorite_area{
		text-align: right;
	}
	.ct_title{
		text-align: left;
	}
	.writeBox{
		display: flex;
		justify-content: flex-end;
	}
	.writeBtn{
		display: flex;
	    align-items: center;
	    background: #EB5D3E;
	    color: #fff;
	    padding: 3px 8px;
	}
	.writeBtn img{
		width: 15px;
	}
	.writeBtn span{
		display: inline;
		padding-left: 3px;
	}
	.answered{
	    margin-left: 7px;
	    font-size: 14px;
	    background-color: #41A1BE;
	    color: #fff;
	    padding: 2px 3px;
	}

	</style>
	<?php include './header.html';?>

	<div id="container">
		<section class="aside_section">
			<div class="inner">
				<aside class="side_menu">
					<div class="sticky">
						<article class="menu">
							<ul>
								<li><a href="notice.html">공지사항</a></li>
								<li class="active"><a href="qna.html">문의사항</a></li>
							</ul>
						</article>
					</div>
				</aside>
				<article class="content">
					<section class="favorite_area">
						<h1 class="ct_title">문의사항</h1>
						<div class="writeBox">
							<a href="./write_qna.html">
								<button class="writeBtn"><img src="./STATIC/img/icon/pen-1.png"><span>글쓰기</span></button>
							</a>
						</div>
						<section class="customer_area">
							<article class="customer_his_area">
								<div class="divTable">
									<div id="post-list" class="thead_">
										<dl>
											<dt>NO</dt>
											<dt>분류</dt>
											<dt>제목</dt>
											<dt>닉네임</dt>
											<dt>등록일</dt>
										</dl>
									</div>
									<div class="qna_list">
										
									</div>
							</article>
							<article class="pagenate">
								
							</article>
						</section>
					</section>
				</article>
			</div>
		</section>
	</div>
	<?php include './footer.html'; ?>
	<script type="text/javascript">
		var currentPage = 1;

		var jumpPage = 1;
		getQnaList(currentPage);
      	setPageButton(currentPage);

      	// 페이지 클릭 이벤트 처리
	    $(document).on('click', '.paginate_button_num', function(){
	        var page = $(this).attr('data-page');
	        getQnaList(page);
	        currentPage = page;
	        setPageButton(currentPage);
	    });
    	

    	$(document).on("click", ".drop_btn", function() {
    		var $this = $(this);
			var $parent = $this.parents('li');
			$this.toggleClass('active');
			if($this.hasClass('active')){
				$parent.find('.full-text').slideDown(300);
			} else {
				$parent.find('.full-text').slideUp(300);
			}
    	})

    	$(".moreBtn").click(function(){
    		pageNum ++;
    		getMyReserveList(pageNum);
    	});

		function getQnaList(page){
			console.log("?");
			$.ajax({
	          	type: 'POST',
	          	url: 'get_qnaList.php', // 서버 측의 파일 경로 또는 URL
	          	dataType: 'json',
	          	data: { page: page },
	          	success: function (response) {
	            // 서버로부터의 응답 처리
	            	console.log(response);
	            	$(".qna_list").html(response.data);

	            	if ((page - 1) % 5 === 0) {
	                  loadPagination(response.startPage,response.endPage,response.totalPages);
	                  setPageButton(page);
	                }

	          	},
	          	error: function () {
	            // 오류 처리
	            	$('#result').text('Error occurred.');
	          	}
	        });
		}

		function loadPagination(startPage,endPage,totalPages){
			var paginationHtml = '<ul>';

			if(startPage!=1){
				paginationHtml += '<li id="prev_btn" class="first_">';
				paginationHtml += '<a><img src="STATICE/img/icon/tool/first_.svg"></a>';
				paginationHtml += '</li>';
			}

			for(var i = startPage; i <= endPage; i++){
				paginationHtml += '<li id="page-'+i+'" class="paginate_button_num" data-page="'+i+'">';
				paginationHtml += '<a>'+i+'</a></li>';
			}

			if(endPage!=totalPages){
				paginationHtml += '<li id="next-btn" class="last_">';
				paginationHtml += '<a><img src="STATIC/img/icon/tool/last_.svg"></a>';
				paginationHtml += '</li>';
			}

			paginationHtml += '</ul>';

			$('.pagenate').html(paginationHtml);
		}

		function setPageButton(currentPage) {
	        $(".paginate_button_num").removeClass('active');
	        $("#page-"+currentPage).addClass('active');
	    }

	    $(document).on("click", "#prev-btn", function() {
	        jumpPage -= 10;
	        loadTableData(jumpPage);
	        setPageButton(jumpPage);
	    });

	    $(document).on("click", "#next-btn", function() {
	        jumpPage += 10;
	        console.log(jumpPage);
	        loadTableData(jumpPage);
	        setPageButton(jumpPage);
	    });
	</script>
</body>
</html>