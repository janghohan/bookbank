<!DOCTYPE html>
<html>
<head>
	<meta name="code" charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=0,maximum-scale=10,user-scalable=yes"/>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script type="text/javascript" src="STATIC/js/common.js"></script>
	<script type="text/javascript" src="STATIC/js/swiper-bundle.min.js"></script>
	<link rel="stylesheet" type="text/css" href="STATIC/css/swiper-bundle.min.css"/>
	<link rel="stylesheet" type="text/css" href="STATIC/css/style.css"/>
</head>
<body>
	<?php include './header.html'; ?>
	<div id="container">
		<section class="aside_section">
			<div class="inner">
				<aside class="side_menu">
					<div class="sticky">
						<article class="profile_area">
							<!-- <div class="profile_img"></div> -->
							<div class="profile_info">
								<div class="name"><?=$_COOKIE['login_name']?></div>
							</div>
							<div class="email"><?=$_COOKIE['login_email']?></div>
						<!-- 	<div class="tier">
								<div>회원등급</div>
								<div><img src="STATIC/img/icon/asset/v0.svg"></div>
							</div> -->
						</article>
						<article class="menu">
							<ul>
								<li class="active"><a href="info.html">정보 변경</a></li>
								<li><a href="info_reserve.html">예약 내역</a></li>
								<li><a href="info_qna.html">문의 내역</a></li>
							<!-- 	<li><a href="프로필편집.html">프로필 편집</a></li>
								<li><a href="포인트.html">아싸뷰 포인트</a></li>
								<li><a href="알림함.html">알림함</a></li>
								<li><a href="나의캠페인.html">나의캠페인</a></li>
								<li><a href="찜리스트.html">찜리스트</a></li>
								<li><a href="포트폴리오.html">포트폴리오</a></li> -->
							</ul>
						</article>
					</div>
				</aside>
				<article class="content">
					<h1 class="ct_title">정보 변경</h1>
					<section class="account_modify">
						<article class="mofidy_area">
							<h5 class="title">계정 정보 설정</h5>
							<div class="field_area max700">
								<form id="info_form">
									<div class="field">
										<label>아이디</label>
										<input type="text" name="edit_id" value="<?=$_COOKIE['login_id']?>" disabled>
									</div>
									<div class="field">
										<label>이메일</label>
										<input type="text" name="edit_email" value="<?=$_COOKIE['login_email']?>">
									</div>
									<div class="field">
										<label>휴대전화</label>
										<div class="verify_">
											<input type="number" name="edit_contact" value="<?=$_COOKIE['login_contact']?>">
										</div>				
									</div>
								</form>
								
							</div>
							<div class="btn_area mt50">
								<button id="infoEditBtn" class="submitBtn">계정 정보 저장</button>
							</div>
						</article>
			
						
						<article class="mofidy_area pwd">
							<h5 class="title">비밀번호 수정</h5>
							<div class="field_area max700">
								<form id="pwd_form">
									<input type="hidden" name="user_id" value="<?=$_COOKIE['login_id']?>">
									<div class="field">
										<label>기존 비밀번호</label>
										<input type="password" name="ex_password">
									</div>
									<div class="field">
										<label>새 비밀번호</label>
										<input type="password" name="new_password">
									</div>
									<div class="field">
										<label>새 비밀번호 확인</label>
										<input type="password" name="new_password2">
									</div>
								</form>
							</div>
							<div class="btn_area between mt50">
								<button id="pwdEditBtn" class="submitBtn">비밀번호 변경</button>
								<button id="logoutBtn" class="subBtn">로그아웃</button>
							</div>
						</article>
					</section>
				</article>
			</div>
		</section>
	</div>
	<?php include './footer.html'; ?>
	<script type="text/javascript">
		// $( function(){
  //   		var select = new CustomSelectBox('.bank_');
  //   	})
		// // 전체보기
  //   	$('.drop_btn').click( function(){
		// 	var $this = $(this);
		// 	var $parent = $this.parents('li');
		// 	$this.toggleClass('active');
		// 	if($this.hasClass('active')){
		// 		$parent.find('.dorp_wrap').slideDown(300);
		// 	} else {
		// 		$parent.find('.dorp_wrap').slideUp(300);
		// 	}
		// })

	$("#infoEditBtn").click(function(){
		var formData = $("#info_form").serialize();
		$.ajax({
			type: "POST",
          	url: "./API/edit_info_api.php", // 실제 서버 엔드포인트로 교체
          	data: formData,
          	success: function (response) {
          		console.log(response);
            // 성공적으로 응답을 받았을 때의 처리;
            	if(response==1){
            		alert('정보가 변경되었습니다.');
            		location.reload();
            	}else{
            		alert('문제가 발생하였습니다. 관리자에게 문의하세요');
            	}
            	// $('#singup_form :input').val('');
          	},
          	error: function (error) {
            // 오류 발생 시의 처리
            	console.error("Error:", error);
          	}

		});
	});

	$("#pwdEditBtn").click(function(){
		var formData = $("#pwd_form").serialize();
		$.ajax({
			type: "POST",
          	url: "./API/edit_pwd_api.php", // 실제 서버 엔드포인트로 교체
          	data: formData,
          	success: function (response) {
          		console.log(response);
            // 성공적으로 응답을 받았을 때의 처리;
            	if(response==1){
            		alert('비밀번호가 변경되었습니다. 다시 로그인해주세요.');
            		location.href = './API/logout_api.php';
            	}else{
            		alert(response);
            	}
            	// $('#singup_form :input').val('');
          	},
          	error: function (error) {
            // 오류 발생 시의 처리
            	console.error("Error:", error);
          	}

		});

	});

	$("#logoutBtn").click(function(){
		location.href = './API/logout_api.php';
	});
	</script>
</body>
</html>